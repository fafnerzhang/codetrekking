# Test environment configuration for API Service Integration Tests
# Copy this file to .env.test and update the values for your test environment

# =============================================================================
# TEST ENVIRONMENT SETTINGS
# =============================================================================

# Test Environment Identifier
ENVIRONMENT=testing
LOG_LEVEL=WARNING

# =============================================================================
# TEST USER CREDENTIALS
# =============================================================================
# Configure these credentials for testing authentication
# These should match valid users in your test database

TEST_USERNAME=your_test_username
TEST_PASSWORD=your_test_password
TEST_BASE_URL=http://localhost:8010

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# For integration tests, you can use either:
# 1. A dedicated test database (recommended for full integration tests)
# 2. SQLite in-memory database (faster, but limited functionality)

# Option 1: PostgreSQL test database (recommended)
DATABASE_URL=postgresql://username:password@localhost:5432/codetrekking_test

# Option 2: SQLite in-memory database (uncomment to use)
# DATABASE_URL=sqlite:///:memory:

# =============================================================================
# EXTERNAL SERVICES FOR TESTING
# =============================================================================
# Configure these to point to your test/development services

# Elasticsearch (for analytics tests)
ELASTICSEARCH_HOST=http://localhost:9200
ELASTIC_USER=elastic
ELASTIC_PASSWORD=your_elastic_password
ELASTICSEARCH_INDEX_PREFIX=test-codetrekking

# RabbitMQ (for task tests)
RABBITMQ_URL=amqp://username:password@localhost:5672/
RABBITMQ_EXCHANGE=codetrekking-test
RABBITMQ_QUEUE_PREFIX=test

# =============================================================================
# JWT CONFIGURATION FOR TESTS
# =============================================================================
# Use a dedicated test secret (different from production)
JWT_SECRET_KEY=test-secret-key-for-integration-tests-only
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8010

# CORS (for frontend integration tests)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000,http://127.0.0.1:8080

# =============================================================================
# STORAGE PATHS FOR TESTS
# =============================================================================
# Use test-specific directories to avoid conflicts
STORAGE_ROOT=/tmp/codetrekking-test/storage
GARMIN_STORAGE=/tmp/codetrekking-test/storage/garmin
UPLOAD_DIRECTORY=/tmp/codetrekking-test/uploads

# =============================================================================
# RATE LIMITING (relaxed for tests)
# =============================================================================
DEFAULT_RATE_LIMIT=1000/minute
AUTH_RATE_LIMIT=100/minute

# =============================================================================
# FILE HANDLING
# =============================================================================
MAX_FILE_SIZE_MB=50

# =============================================================================
# LOGGING CONFIGURATION FOR TESTS
# =============================================================================
LOG_FORMAT=json
AUDIT_LOG_ENABLED=false  # Disable audit logging in tests for cleaner output

# =============================================================================
# ENCRYPTION CONFIGURATION FOR TESTS
# =============================================================================
# Use a test-specific encryption key
GARMIN_ENCRYPTION_KEY=your_base64_encoded_encryption_key
GARMIN_ENCRYPTION_VERSION=1